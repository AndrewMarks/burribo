---
phase: 07-polish-deploy
plan: 02
type: execute
depends_on: ["07-01"]
files_modified: [assets/css/main.scss, assets/js/main.js]
---

<objective>
Polish animations and optimize performance.

Purpose: Ensure animations are smooth, performant, and enhance the user experience without causing jank.
Output: Refined animations with reduced-motion support and performance optimizations.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md

**Current animation files:**
@assets/css/main.scss
@assets/js/main.js

**Existing animations:**
- Star drift animation (keyframes in CSS)
- GSAP ScrollTrigger reveals
- Lenis smooth scroll
- Header scroll state transitions
- Card hover effects

**Performance concerns:**
- will-change properties
- Compositor-only animations (transform, opacity)
- Reduced motion preference
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add reduced-motion support</name>
  <files>assets/css/main.scss</files>
  <action>
Add prefers-reduced-motion media query support:

1. Create a reduced-motion section at end of main.scss:
   ```scss
   @media (prefers-reduced-motion: reduce) {
     // Disable star drift animation
     .stars { animation: none; }

     // Disable transitions
     *, *::before, *::after {
       animation-duration: 0.01ms !important;
       animation-iteration-count: 1 !important;
       transition-duration: 0.01ms !important;
     }
   }
   ```

2. Keep essential state changes (hover states) but remove motion.

3. Ensure scroll behavior respects reduced motion:
   ```scss
   @media (prefers-reduced-motion: reduce) {
     html {
       scroll-behavior: auto;
     }
   }
   ```

This is an accessibility requirement, not optional.
  </action>
  <verify>Read file and confirm prefers-reduced-motion styles added</verify>
  <done>Reduced motion preference respected throughout site</done>
</task>

<task type="auto">
  <name>Task 2: Optimize animation performance</name>
  <files>assets/css/main.scss</files>
  <action>
Review and optimize animation performance:

1. Verify will-change usage:
   - Only add will-change on elements that animate continuously
   - Stars already have will-change: transform â€” verify this is set
   - Remove any unnecessary will-change properties

2. Ensure all animations use compositor-only properties:
   - transform (translate, scale, rotate)
   - opacity
   - Avoid animating: width, height, top, left, margin, padding

3. Add GPU acceleration hints where needed:
   - transform: translate3d(0,0,0) for critical animated elements
   - Already present on stars, verify others

4. Review transition timing:
   - Hover transitions should be fast (~0.2s)
   - Page transitions can be slower (~0.3s)
   - Standardize on ease or ease-out curves
  </action>
  <verify>Read file and confirm performance optimizations applied</verify>
  <done>Animations optimized for 60fps performance</done>
</task>

<task type="auto">
  <name>Task 3: Review and polish JS animations</name>
  <files>assets/js/main.js</files>
  <action>
Review JavaScript animation code for polish:

1. Verify GSAP ScrollTrigger setup:
   - Proper cleanup on page transitions (if SPA-like)
   - Reasonable trigger points (start/end values)
   - No overlapping animations causing conflicts

2. Verify Lenis smooth scroll:
   - Respects reduced motion preference
   - Reasonable lerp value (0.1-0.15 is typical)
   - Proper RAF loop management

3. Check header scroll behavior:
   - Smooth transitions on scroll state change
   - No jank or flash during state transitions

4. Minor polish:
   - Ensure all reveals have appropriate timing
   - Stagger animations feel natural
   - No elements stuck in mid-animation on fast scroll

If code is already solid, document it as verified. Only change if issues found.
  </action>
  <verify>Read file and confirm JS animations are polished</verify>
  <done>JavaScript animations reviewed and optimized</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] prefers-reduced-motion disables animations
- [ ] No layout-triggering animations (width/height/top/left)
- [ ] will-change used appropriately (not excessively)
- [ ] Scroll reveals work smoothly
- [ ] No visible jank on animation
</verification>

<success_criteria>
- Reduced motion preference fully supported
- All animations use compositor-only properties
- GSAP/Lenis properly configured
- Smooth 60fps performance
</success_criteria>

<output>
After completion, create `.planning/phases/07-polish-deploy/07-02-SUMMARY.md`

Commit per task:
- Task 1: feat(07-02): add reduced-motion support
- Task 2: perf(07-02): optimize animation performance
- Task 3: feat(07-02): polish JS animations
</output>
